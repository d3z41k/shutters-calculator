{{template "base" .}}

{{define "main"}}
    {{if .Fabrics}}
    <div class="row">
        <div class="col-md-6">
            <div class="card card-primary">
                <div class="card-header">
                    <h3 class="card-title">Калькулятор</h3>
                </div>
                <form action="/" method='POST'>
                    <div class="card-body">
                        <div class="form-group">
                            <label>Ткань</label>

                            <select name="fabric_id" class="custom-select rounded-0">
                                {{$selectedFabric := .FabricID}}
                                {{range .Fabrics}}
                                <option value="{{.ID}}" {{if eq .ID $selectedFabric}} selected {{end}}>{{.Name}}</option>
                                {{end}}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Цвет</label>
                            <select name="color_id" class="custom-select rounded-0">
                                {{$selectedColor := .ColorID}}
                                {{range .Colors}}
                                <option value="{{.ID}}" {{if eq .ID $selectedColor}} selected {{end}}>{{.Name}}</option>
                                {{end}}
                            </select>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Ширина</label>
                                    <input type="text" name="profile_width" class="form-control" value="{{if .ProfileWidth}}{{.ProfileWidth}}{{end}}">
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Высота</label>
                                    <input type="text" name="profile_height" class="form-control" value="{{if .ProfileHeight}}{{.ProfileHeight}}{{end}}">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Цена</label>
                                    <p class="form-control">{{if .Result}} {{.Result}} {{else}} 0 {{end}}&#8381;</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button type="submit" class="btn btn-primary">Расчёт</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

<!--        <table class="table">-->
<!--            <tr>-->
<!--                <th>ID</th>-->
<!--                <th>Категория</th>-->
<!--                <th>Название</th>-->
<!--                <th>Цена, &#8381;</th>-->
<!--            </tr>-->
<!--            {{range .Fabrics}}-->
<!--            <tr>-->
<!--                <td>{{.ID}}</td>-->
<!--                <td>{{.Category.Name}}</td>-->
<!--                <td>{{.Name}}</td>-->
<!--                <td>{{.Category.Price}}</td>-->
<!--            </tr>-->
<!--            {{end}}-->
<!--        </table>-->
    {{else}}
        <p>There's nothing to see here... yet!</p>
    {{end}}
{{end}}